<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Linktree</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- Link para o Manifest -->
    <link rel="manifest" href="/manifest.json">
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-md-12 text-center">
                <img src="https://iasdlmdc.github.io/app-page/icon-512x512.png" alt="ícone" class="img-fluid">
                <h1>Bem-vindo ao Site da IASD Leônidas Moreira</h1>
                <p>Tenha o site da igreja diretamente na tela do seu celular. Clique abaixo para adicionar.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <form>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="confirmCheckbox">
                        <label class="form-check-label" for="confirmCheckbox">Eu quero adicionar à tela inicial</label>
                    </div>
                    <button type="button" class="btn btn-primary" id="confirmButton" disabled>Confirmar</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        let deferredPrompt;

        const confirmCheckbox = document.getElementById('confirmCheckbox');
        const confirmButton = document.getElementById('confirmButton');

        confirmButton.disabled = true;

        confirmCheckbox.addEventListener('change', () => {
            confirmButton.disabled = !confirmCheckbox.checked;
        });

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            confirmButton.disabled = false; // Habilitar o botão quando o evento for disparado
        });

        confirmButton.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    console.log('Usuário aceitou a instalação');
                    // Redirecionar para uma página de agradecimento ou realizar outras ações
                    window.location.href = 'https://sua-pagina-de-agradecimento.html';
                } else {
                    console.log('Usuário rejeitou a instalação');
                }
                deferredPrompt = null;
            }
        });
    </script>

    <!-- Registro do Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then((registration) => {
                        console.log('Service Worker registrado com sucesso:', registration);
                    })
                    .catch((error) => {
                        console.log('Falha ao registrar o Service Worker:', error);
                    });
            });
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0sG1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>
